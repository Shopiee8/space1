import{B as E,m as p,r as y,y as S,G as t,o as L,z as W,A as $,w as q,a as d,t as b,d as h,J as B,a0 as D,L as v,P as N,ae as k,ab as C,af as g,O as G,ag as w,c as I}from"./entry.3e07ed2f.js";const M={class:"global-loader"},R={class:"global-loader__text"},P={class:"global-loader__progress"},J={__name:"GlobalLoader",setup(n){const o=E(),s=p(()=>o.showLoader),a=y(0),i=p(()=>Math.floor(a.value.toString().padStart(2,0)));function c(){}function l(e){v.to(a,{value:e.progress,duration:1,onComplete:function(){a.value===100&&(o.showLoader=!1)}})}function u(){}function _(){document.documentElement.classList.add("no-scroll")}function m(){document.documentElement.classList.remove("no-scroll"),v.delayedCall(.4,()=>{o.showUI=!0})}return S(()=>{_(),t.on("webgl_loading_start",c),t.on("webgl_loading_progress",l),t.on("webgl_loaded",u)}),(e,r)=>(L(),W(D,{name:"loader",duration:{enter:400,leave:400},onEnter:_,onLeave:m},{default:$(()=>[q(d("aside",M,[d("div",R,[d("span",null,b(e.$t("general.loading")),1),d("span",P,b(h(i))+"%",1)])],512),[[B,h(s)]])]),_:1}))}};const z={name:"Webgl",setup(){const n=y(null),o=k(),s=C();o.afterEach((e,r,f)=>{const x=c(e);t.emit("webgl_set_scene",{sceneId:x,slug:s.params.slug})});let a=null;function i(e){switch(e.query&&e.query.scene||e.name.split("__")[0]){case"gui":return"main";default:return"events"}}function c(e){switch(e.query&&e.query.state||e.name.split("__")[0]){case"index":return"home";case"topics":return"topics";case"topics-slug":return"topic";case"experience":return"experience";case"results":return"result";case"home":return"home";case"face":return"face";case"events":return"events";case"archetypes":return"archetypes";default:return"home"}}S(async()=>{if(await o.isReady(),s.query&&!!s.query.nowebgl){t.emit("webgl_loading_progress",{progress:100}),t.emit("webgl_loaded"),n.value.classList.add("no-webgl");return}a=await g.init(n.value),l();const r=i(s);g.getScene(r),t.emit("webgl_loading_start"),g.loadScene(r).then(()=>{g.activate(r).then(()=>{const f=c(s);t.emit("webgl_set_scene",{sceneId:f,slug:s.params.slug})})}),_()}),G(()=>{u(),m()});const l=()=>{a&&w.subscribe("canvas",a.render.bind(a))},u=()=>{w.unsubscribe("canvas")},_=()=>{t.on("webgl_raf_start",l),t.on("webgl_raf_stop",u)},m=()=>{t.off("webgl_raf_start",l),t.off("webgl_raf_stop",u)};return{canvas:n}}},F={ref:"canvas",class:"webgl-container"};function U(n,o,s,a,i,c){return L(),I("div",F,null,512)}const O=N(z,[["render",U]]),Q=n=>["ar","az","dv","he","ku","fa","ur"].includes(n)?"rtl":"ltr";export{J as _,O as a,Q as g};
